{
	"id": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
	"name": "Policy Test: JWT Token",
	"description": "HTTP Actions to test JWT token policy application",
	"order": [
		"a08b4223-a067-6874-62c2-467d0146b1dd",
		"959d9316-9b06-91d9-317b-5290b381f88e",
		"5c244e97-b9d7-1133-976f-993b289addea",
		"b7465b55-22ed-2028-36d0-f96fab99d8bd",
		"522e9d8d-919b-2389-0883-b015ec941009",
		"1c5de201-2a3b-bcb9-3c53-1ffa52d2c571",
		"3b4fa6e0-7096-4658-e8c9-d88658ccb99e",
		"ec242d2b-769e-4d23-6947-a7bfbca46302",
		"1aab7f5b-c010-92b7-60ab-223b4c5b5dbc",
		"97fdb512-5df5-37e4-f03a-30515ee0cbf4",
		"2dbc689e-0ee2-4de4-65ab-6a1ecc1390f7"
	],
	"folders": [],
	"timestamp": 1454353444729,
	"owner": 0,
	"public": false,
	"hasRequests": true,
	"requests": [
		{
			"id": "1aab7f5b-c010-92b7-60ab-223b4c5b5dbc",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/task",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "DELETE",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353843344,
			"name": "Step 9: Delete a Task",
			"description": "Delete a task using TaskId",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
			"rawModeData": "{\"taskListId\":\"{{taskListId}}\",\"taskId\":\"{{taskId}}\"}"
		},
		{
			"id": "1c5de201-2a3b-bcb9-3c53-1ffa52d2c571",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/task/{{taskListId}}",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "GET",
			"data": [],
			"dataMode": "params",
			"version": 2,
			"tests": "var data = JSON.parse(responseBody);\npostman.setEnvironmentVariable(\"taskId\", data.$values[0].TaskId);",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353798124,
			"name": "Step 6: Read Tasks",
			"description": "Create a new task under a task list using 'TaskListId'",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486"
		},
		{
			"id": "2dbc689e-0ee2-4de4-65ab-6a1ecc1390f7",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/user",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "DELETE",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353888219,
			"name": "Step 11: Delete the user",
			"description": "Delete the specified user",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
			"rawModeData": "{\"userId\":\"{{userId}}\"}"
		},
		{
			"id": "3b4fa6e0-7096-4658-e8c9-d88658ccb99e",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/task",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "PUT",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353823651,
			"name": "Step 7: Update  a task",
			"description": "Update a teask using PUT method",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
			"rawModeData": "{\"taskId\":\"{{taskId}}\", \"taskListId\":\"{{taskListId}}\", \"data\":[{\"key\":\"Title\",\"value\":\"New Text\"},{\"key\":\"IsCompleted\",\"value\":\"false\"}]}"
		},
		{
			"id": "522e9d8d-919b-2389-0883-b015ec941009",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/task",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353800189,
			"name": "Step 5: Create a new Task",
			"description": "Create a new task under a task list using 'TaskListId'",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
			"rawModeData": "{\"taskListId\":\"{{taskListId}}\",\"taskTitle\":\"New Task\"}"
		},
		{
			"id": "5c244e97-b9d7-1133-976f-993b289addea",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/tasklist",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353803714,
			"name": "Step 3: Create a new Task List",
			"description": "Create new task list against a 'UserId'",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
			"rawModeData": "{\"userId\":\"{{userId}}\",\"taskListTitle\":\"New Task List please\"}"
		},
		{
			"id": "959d9316-9b06-91d9-317b-5290b381f88e",
			"headers": "Ocp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJ3d3cuc2FtcGxlLXRhc2stYXBpLmNvbSIsInN1YiI6IjEyMzQ1Njc4OTAiLCJuYW1lIjoiSm9obiBEb2UiLCJhZG1pbiI6dHJ1ZX0.bEseQuNDAGk7wCtP197BwJEXd7JFxa8--wX95sLvjdY\n",
			"url": "{{url}}/tasks/user/{{userName}}",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "GET",
			"data": [],
			"dataMode": "params",
			"version": 2,
			"tests": "var data  ={};\nif(responseBody.slice(0,1) === '<')\n{\n    data = xml2Json(responseBody);\n}\nelse\n{\n    data = JSON.parse(responseBody);\n}\npostman.setEnvironmentVariable(\"userId\", data.UserId);\n\nconsole.log(data.UserId);",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454349647720,
			"name": "Step 2: Read a given user details",
			"description": "Read User detail by providing email address. The UserId is used to create new tasklists",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486"
		},
		{
			"id": "97fdb512-5df5-37e4-f03a-30515ee0cbf4",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/tasklist",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "DELETE",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353854349,
			"name": "Step 10: Delete a Task List",
			"description": "Delete a task list using TaskListId",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
			"rawModeData": "{\"userId\":\"{{userId}}\",\"taskListId\":\"{{taskListId}}\"}"
		},
		{
			"id": "a08b4223-a067-6874-62c2-467d0146b1dd",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/user",
			"preRequestScript": "var random = Math.random();\nvar emailAddress = \"test_jwt\"+random*100+\"@mail.com\";\npostman.setEnvironmentVariable(\"userName\", emailAddress);\npostman.setEnvironmentVariable(\"userId\", undefined);\npostman.setEnvironmentVariable(\"taskListId\", undefined);\npostman.setEnvironmentVariable(\"taskId\", undefined);",
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454997021697,
			"name": "Step 1: Create a new User",
			"description": "Creating a new user",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486",
			"rawModeData": "{\"emailAddress\":\"{{userName}}\"}"
		},
		{
			"id": "b7465b55-22ed-2028-36d0-f96fab99d8bd",
			"headers": "Ocp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/tasklist/{{userId}}",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "GET",
			"data": [],
			"dataMode": "params",
			"version": 2,
			"tests": "tests[\"Status code is 200\"] = responseCode.code === 200;\nvar data = JSON.parse(responseBody);\npostman.setEnvironmentVariable(\"taskListId\", data.$values[0].TaskListId);\n\n",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353802206,
			"name": "Step 4: Read Task Lists",
			"description": "Get all tasklist for a user. TaskListId is used to read or create tasks under it",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486"
		},
		{
			"id": "ec242d2b-769e-4d23-6947-a7bfbca46302",
			"headers": "Content-Type: application/json\nOcp-Apim-Trace: true\nOcp-Apim-Subscription-Key: {{Ocp-Apim-Key}}\nAuthorization: {{JWT-Token}}\n",
			"url": "{{url}}/tasks/task/{{taskListId}}",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "GET",
			"data": [],
			"dataMode": "params",
			"version": 2,
			"tests": "",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1454353845372,
			"name": "Step 8: Read Tasks after update",
			"description": "GEt the updated list",
			"collectionId": "05e6775f-5b43-6cd8-b6b9-a03dfa7b3486"
		}
	]
}